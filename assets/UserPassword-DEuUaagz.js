import{_ as e}from"./PageContainer-BQOATNCB.js";import{q as a,s as l,a as r,w as s,o as d,v as o,y as u,b$ as p,E as t,c0 as w}from"./index-C6yrd5mH.js";import{E as m,a as i}from"./el-form-item-DqV8URwO.js";import{E as n}from"./_plugin-vue_export-helper-CVcqmBuK.js";import{E as _}from"./el-input-Dd4YCAAp.js";import"./el-message-DOujGntW.js";const g={__name:"UserPassword",setup(g){const f=a(),v=a({old_pwd:"",new_pwd:"",re_pwd:""}),b={old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{min:6,max:15,message:"原密码必须在6-15位之间",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:15,message:"新密码必须在6-15位之间",trigger:"blur"},{validator:(e,a,l)=>{a===v.value.old_pwd?l(new Error("新密码不能与原密码相同")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:15,message:"确认密码必须在6-15位之间",trigger:"blur"},{validator:(e,a,l)=>{a!==v.value.new_pwd?l(new Error("新密码与确认密码不一致")):l()},trigger:"blur"}]},c=l(),y=async()=>{await f.value.validate(),await p(v.value),t.success("密码修改成功"),c.setToken(""),c.setUser({}),w.push("/login")},V=()=>{v.value.old_pwd="",v.value.new_pwd="",v.value.re_pwd=""};return(a,l)=>{const p=_,t=m,w=n,g=i,c=e;return d(),r(c,{title:"修改密码"},{default:s((()=>[o(g,{model:v.value,rules:b,ref_key:"formRef",ref:f,"label-width":"120px",style:{width:"50%"}},{default:s((()=>[o(t,{label:"原密码",prop:"old_pwd"},{default:s((()=>[o(p,{type:"password",modelValue:v.value.old_pwd,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value.old_pwd=e),"show-password":""},null,8,["modelValue"])])),_:1}),o(t,{label:"新密码",prop:"new_pwd"},{default:s((()=>[o(p,{type:"password",modelValue:v.value.new_pwd,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value.new_pwd=e),"show-password":""},null,8,["modelValue"])])),_:1}),o(t,{label:"确认密码",prop:"re_pwd"},{default:s((()=>[o(p,{type:"password",modelValue:v.value.re_pwd,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value.re_pwd=e),"show-password":""},null,8,["modelValue"])])),_:1}),o(t,null,{default:s((()=>[o(w,{type:"primary",onClick:y},{default:s((()=>l[3]||(l[3]=[u("修改密码")]))),_:1}),o(w,{onClick:V},{default:s((()=>l[4]||(l[4]=[u("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}};export{g as default};
