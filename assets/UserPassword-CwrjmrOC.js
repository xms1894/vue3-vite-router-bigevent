import{_ as b}from"./PageContainer-CZse-2GS.js";import{q as m,s as c,a as E,w as a,o as V,v as o,y as w,b$ as y,E as x,c0 as U}from"./index-DagrscZg.js";import{E as P,a as C}from"./el-form-item-D-WX_tTG.js";import{E as k}from"./_plugin-vue_export-helper-BroaMqBQ.js";import{E as q}from"./el-input-DOvlmmbw.js";import"./el-message-BHYeCJcb.js";const j={__name:"UserPassword",setup(F){const d=m(),r=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{min:6,max:15,message:"原密码必须在6-15位之间",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:15,message:"新密码必须在6-15位之间",trigger:"blur"},{validator:(n,e,l)=>{e===r.value.old_pwd?l(new Error("新密码不能与原密码相同")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:15,message:"确认密码必须在6-15位之间",trigger:"blur"},{validator:(n,e,l)=>{e!==r.value.new_pwd?l(new Error("新密码与确认密码不一致")):l()},trigger:"blur"}]},u=c(),_=async()=>{await d.value.validate(),await y(r.value),x.success("密码修改成功"),u.setToken(""),u.setUser({}),U.push("/login")},f=()=>{r.value.old_pwd="",r.value.new_pwd="",r.value.re_pwd=""};return(n,e)=>{const l=q,t=P,p=k,g=C,v=b;return V(),E(v,{title:"修改密码"},{default:a(()=>[o(g,{model:r.value,rules:i,ref_key:"formRef",ref:d,"label-width":"120px",style:{width:"50%"}},{default:a(()=>[o(t,{label:"原密码",prop:"old_pwd"},{default:a(()=>[o(l,{type:"password",modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.old_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(t,{label:"新密码",prop:"new_pwd"},{default:a(()=>[o(l,{type:"password",modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.new_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(t,{label:"确认密码",prop:"re_pwd"},{default:a(()=>[o(l,{type:"password",modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.re_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(t,null,{default:a(()=>[o(p,{type:"primary",onClick:_},{default:a(()=>e[3]||(e[3]=[w("修改密码")])),_:1}),o(p,{onClick:f},{default:a(()=>e[4]||(e[4]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{j as default};
